<header>
  <title>SVGA Lite</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="maximum-scale=1, width=750, initial-scale=1, user-scalable=0">
</header>
<style>
  #canvas {
    max-width: 100%;
    background-color: black;
  }
</style>
<script src="index.min.js"></script>

<canvas id="canvas" width="300" height="300"></canvas>

<script>
  const canvas = document.getElementById('canvas');
  const player = new SVGA.Player(canvas);
  window.onload = async function () {
    const parser = await new SVGA.Parser().load('/__test__/svga/a.bin');
    await player.mount(parser)
  }
  function onFrame() {
    let a = player.getAllFrames()
    for (let i = 0; i < a.length; i++) {
      const imageData = new ImageData(
        new Uint8ClampedArray(a[i]),
        360,
        540
      );
      logImageDataAsImage(imageData);
    }
  }
  function logImageDataAsImage(imageData) {
    const canvas = document.createElement('canvas');
    canvas.width = imageData.width;
    canvas.height = imageData.height;
    const ctx = canvas.getContext('2d');
    ctx.putImageData(imageData, 0, 0);

    console.log(`ImageData (${imageData.width}x${imageData.height})`);
    console.log('%c ', `
    font-size: 1px;
    padding: ${imageData.height / 2}px ${imageData.width / 2}px;
    background: url(${canvas.toDataURL()}) no-repeat;
    background-size: contain;
  `);
  }
</script>

<p>
  <button onclick="player.start()">Start</button>
  <button onclick="player.pause()">Pause</button>
  <button onclick="player.resume()">Resume</button>
  <button onclick="player.stop()">Stop</button>
  <button onclick="player.clear()">Clear</button>
  <button onclick="player.destroy()">Destroy</button>
  <button onclick="onFrame()">Get All Frames</button>
</p>